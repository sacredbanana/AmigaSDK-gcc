# Makefile for project "docky"
# Automatically generated by idltool
# 
# $Id: Makefile,v 1.10 2009-07-22 06:59:24 cmincea Exp $
# 
# $Revision: 1.10 $
# 
# 
# $Log
# 

# Uncomment the next line if you are cross compiling
CROSS_COMPILE = ppc-amigaos-

CC     = $(CROSS_COMPILE)gcc 
CXX    = $(CROSS_COMPILE)c++ 
AS     = $(CROSS_COMPILE)as 
LD     = $(CROSS_COMPILE)ld 
RANLIB = $(CROSS_COMPILE)ranlib 
STRIP  = $(CROSS_COMPILE)strip
# RM     = delete
RM     = rm

# Change these as required
DEFINES  = -D__NOLIBBASE__ -D__NOGLOBALIFACE__
OPTIMIZE = -O3
DEBUG = -s # -g -DDEBUG
CFLAGS = -fno-strict-aliasing -Wall -Idocky -mcrt=newlib $(DEFINES) $(OPTIMIZE) $(DEBUG)

# Flags passed to gcc during linking
LINK = -mcrt=newlib

# Name of the "thing" to build
TARGETNAME = Skeleton.docky
TARGET = $(TARGETNAME)

# Name of the autdoc file
DOCNAME = docky.doc

# Additional linker libraries
LIBS = 

# Version of the library to build
VERSION = 53

# Source code files used in this project
# Add any additional files to this line

SRCS = init.c

# -------------------------------------------------------------
# Nothing should need changing below this line

# "main" Interface Source Files
main_SRCS = docky/Obtain.c docky/Release.c docky/Expunge.c docky/Clone.c docky/DockyGet.c \
    docky/DockySet.c docky/DockyProcess.c docky/LibraryManager.c docky/intro_docs.c

SOURCES = $(main_SRCS)  $(SRCS)
OBJS = $(main_SRCS:.c=.o)  $(SRCS:.c=.o)

# Rules for building
$(TARGET): $(OBJS)
	$(CC) $(LINK) -nostartfiles -o $(TARGET) $(OBJS) $(LIBS)
	$(STRIP) $(TARGET)
	
.PHONY: clean
clean:
	$(RM) $(TARGET) $(OBJS)

.PHONY: revision
revision:
	bumprev $(VERSION) $(TARGETNAME)

.PHONY: docs
docs:
	cat $(SOURCES) >autodoc_temp.txt
	autodoc -C autodoc_temp.txt >$(DOCNAME)
	rm autodoc_temp.txt
#	open $(DOCNAME)

