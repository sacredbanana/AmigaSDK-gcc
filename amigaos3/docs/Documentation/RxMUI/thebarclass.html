<html>

<head>
<title>TheBar class</title>
</head>

<body>

<table border="0" width="100%">
  <tr>
    <td width="1" valign="bottom"><a href="classes.html"><font size="2">Index</font></a></td>
    <td width="1" valign="bottom"><a href="groupclass.html"><font size="2">Parent</font></a></td>
    <td><h2 align="right">TheBar class</h2>
    </td>
  </tr>
  <tr>
    <td colspan="3"><hr size="1" noshade>
    </td>
  </tr>
</table>

<p>TheBar class is used to create image buttons bars.</p>

<p>TheBar is a subclass of TheBar.mcc so you must have TheBar.mcc, TheBarVirt.mcc and TheButton.mcc
in MUI:Libs/MUI to use it. </p>

<p>Note that TheBar is a group: Horiz attribute may be used to control the horient of the bar;
other Group class attribute should'nt be used.</p>

<p>If you need the buttons to be in a Virtgroup, use TheBarVirt.</p>

<p>&nbsp;</p>

<p>TheBar.rxmec is also an ARexx shared library.</p>

<p>You don't have to worry about adding TheBar.rxmec to the ARexx libraries list,
because it is done automatically.</p>

<p>&nbsp;</p>

<table border="0" width="100%">
  <tr>
    <td colspan="2"><h3><strong><u>TheBarNotify</u></strong></h3>
    </td>
  </tr>
  <tr>
    <td width="2%"></td>
    <td>Adds a notification.</td>
  </tr>
  <tr>
    <td colspan="2"></td>
  </tr>
  <tr>
    <td colspan="2"><strong>Synopsis</strong></td>
  </tr>
  <tr>
    <td width="2%"></td>
    <td>res = TheBarNotify(notifier,button,attr,value,target,method,parameters)<br>
    &lt;notifier/V&gt;,&lt;id/N&gt;,&lt;attr/V&gt;,&lt;value&gt;,&lt;target/V&gt;,&lt;method/V&gt;,{parms}</td>
  </tr>
  <tr>
    <td colspan="2"></td>
  </tr>
  <tr>
    <td colspan="2"><strong>Function</strong></td>
  </tr>
  <tr>
    <td width="2%"></td>
    <td>Adds a notification from <em>notifier</em>, a TheBar object button with id <em>button</em>,
    to <em>target</em> triggered by <em>attr</em> when it changes to <em>value</em> invoking <em>method</em>
    on <em>target</em> with <em>parms</em>. <p>You may use this function only with TheBar
    objects, when you want to set up a notify triggered by a TheBar button.</p>
    <p><em>attr</em> may be one of: <ul>
      <li>Disabled</li>
      <li>Pressed</li>
      <li>Selected</li>
      <li>Timer</tmd></li>
    </ul>
    <p> </td>
  </tr>
  <tr>
    <td colspan="2"></td>
  </tr>
  <tr>
    <td colspan="2"><strong>Inputs</strong></td>
  </tr>
  <tr>
    <td width="2%"></td>
    <td><table border="0">
      <tr>
        <td valign="top"><em>notifier</em></td>
        <td align="center" valign="top">-</td>
        <td valign="top">the object that notifies</td>
      </tr>
      <tr>
        <td valign="top"><em>id</em></td>
        <td align="center" valign="top">-</td>
        <td valign="top">the id of a button of the bar (0,...)</td>
      </tr>
      <tr>
        <td valign="top"><em>attr</em></td>
        <td align="center" valign="top">-</td>
        <td valign="top">the attribute that triggers the notification</td>
      </tr>
      <tr>
        <td valign="top"><em>value</em></td>
        <td align="center" valign="top">-</td>
        <td valign="top">the value of <em>attr</em> that causes the notification</td>
      </tr>
      <tr>
        <td valign="top"><em>target</em></td>
        <td align="center" valign="top">-</td>
        <td valign="top">the target of the notification. Specials values are: <ul>
          <li>_app - the application <em>notifier</em> belongs to</li>
          <li>_win - the window <em>notifier</em> belongs to</li>
          <li>_self - <em>notifier</em> itself</li>
        </ul>
        </td>
      </tr>
      <tr>
        <td valign="top"><em>method</em></td>
        <td align="center" valign="top">-</td>
        <td valign="top">a valid an indirect method to invoke on <em>target</em></td>
      </tr>
      <tr>
        <td valign="top"><em>parms</em></td>
        <td align="center" valign="top">-</td>
        <td valign="top">parameters for <em>method</em>&nbsp;</td>
      </tr>
    </table>
    </td>
  </tr>
  <tr>
    <td colspan="2"></td>
  </tr>
  <tr>
    <td colspan="2"><strong>Result</strong></td>
  </tr>
  <tr>
    <td width="2%"></td>
    <td><table border="0">
      <tr>
        <td valign="top">res</td>
        <td align="center">-</td>
        <td valign="top" width="100%">0 for success or &gt;0 for failure<table border="0">
          <tr>
            <td colspan="4">The function may fail if:</td>
          </tr>
          <tr>
            <td width="2%"></td>
            <td valign="top">[NO_OBJ]</td>
            <td></td>
            <td valign="top"><em>notifier</em> or <em>target</em> not found</td>
          </tr>
          <tr>
            <td></td>
            <td valign="top">[NO_METHOD]</td>
            <td></td>
            <td valign="top"><em>method</em> is not valid for <em>target</em></td>
          </tr>
          <tr>
            <td></td>
            <td valign="top">[METHOD_NONOTIFY]</td>
            <td></td>
            <td valign="top"><em>method</em> is direct-only</td>
          </tr>
          <tr>
            <td></td>
            <td valign="top">[BAD_NOTIFY]</td>
            <td></td>
            <td valign="top">the notification can't be added for some reason</td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </td>
  </tr>
  <tr>
    <td colspan="2"></td>
  </tr>
  <tr>
    <td colspan="2"><strong>See</strong></td>
  </tr>
  <tr>
    <td width="2%"></td>
    <td><a href="notification.html">Notification</a></td>
  </tr>
</table>

<p>&nbsp;</p>

<p>To create a bar, you must define two things:
<ul>
 <li>The images the buttons use</li>
 <li>The buttons </li>
</ul>

Images may be defined in two way:
<ul>
 <li>Listing them in a stem called <em>pics</em>, like in
 <pre>    tb.pics.0="back"
    tb.pics.1="forward"
    tb.pics.2="reload"
    tb.pics.3="stop"
    tb.pics.4="home"
    tb.pics.5="find"</pre>

 <li>Suppling the name of a <em>big image</em> in the Strip attribute</li>
</ul>
<br>Note that you may supply selected pics in <em>spics</em> and disabled pics in <em>dpics</em>
or in SelStrip and DisStrip.<br>

Buttons are defined listing them, as in
<pre>    tb.0.ID=0
    tb.0.Img=0
    tb.0.Text="Back"

    tb.1.ID=1
    tb.1.Img=1
    tb.1.Text="Forward"
    tb.1.Flags="Immediate selected"</pre></p>

<p>&nbsp;</p>

<table border="1" cellpadding="4" width="100%">
  <tr>
    <th colspan="4"><u><strong>Bar attributes</strong></u></th>
  </tr>
  <tr>
    <th><em><strong>Name</strong></em></th>
    <th><em><strong>Type</strong></em></th>
    <th><em><strong>Class</strong></em></th>
    <th><em><strong>Note</strong></em></th>
  </tr>
  <tr>
    <td><strong>Active</strong></td>
    <td>N</td>
    <td>ISGN</td>
    <td>This is the active button in a mutual exclude set of buttons. Note that if just one
    mutual exclude set is defined, this attribute may be used for notification of the active
    one; if more that one mutual exclude set is defined in the same TheBar, this attribute
    reflects the last set active button in a set of mutual exclude buttons and notifications
    triggered by active buttons must be set up via the attribute Selected of any single
    button.</td>
  </tr>
  <tr>
    <td><strong>AutoID</strong></td>
    <td>B</td>
    <td>I</td>
    <td>At init time, buttons are auto numbered, so you don't have to specify the ID attribute of any button</td>
  </tr>
  <tr>
    <td><strong>BarCols</strong></td>
    <td>N</td>
    <td>ISGN</td>
    <td>The number of the columns of the bar</td>
  </tr>
  <tr>
    <td><strong>BarPos</strong></td>
    <td>M</td>
    <td>ISGN G2N</td>
    <td>A number or one of:<ul>
      <li>Left</li>
      <li>Center</li>
      <li>Right</li>
      <li>Up</li>
      <li>Down</li>
    </ul>
    </td>
  </tr>
  <tr>
    <td><strong>BarRows</strong></td>
    <td>N</td>
    <td>ISGN</td>
    <td>The number of the rows of the bar</td>
  </tr>
  <tr>
    <td><strong>BarSpacer</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>Any button spacer becomes a bar spacer</td>
  </tr>
  <tr>
    <td><strong>BorderLess</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>If 1, you get borderless buttons</td>
  </tr>
  <tr>
    <td><strong>DisStrip</strong></td>
    <td>S</td>
    <td>I</td>
    <td>Disabled images strip</td>
  </tr>
  <tr>
    <td><strong>DragBar</strong></td>
    <td>B</td>
    <td>I</td>
    <td>The bar has a drag bar</td>
  </tr>
  <tr>
    <td><strong>EnableKeys</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>Enable key short cuts</td>
  </tr>
  <tr>
    <td><strong>Framed</strong></td>
    <td>B</td>
    <td>I</td>
    <td>The bar frame is drawn</td>
  </tr>
  <tr>
    <td><strong>Free</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>Make the bar is x-y unlimited</td>
  </tr>
  <tr>
    <td><strong>FreeHoriz</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>Make the bar is x unlimited</td>
  </tr>
  <tr>
    <td><strong>FreeVert</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>Make the bar is y unlimited</td>
  </tr>
  <tr>
    <td><strong>Horiz</strong></td>
    <td>B</td>
    <td>IS</td>
    <td>This is a Group attribute, but there is some more to say when used with TheBar.
        It controls the orient of the bar, so if 0, you get a vert bar, if 1 you get a horiz bar.
        It also controls the width of the bar when set: if 0 the bar is y unlimited, if 1 the bar
        is x unlimited. To prevent this, set FreeHoriz/FreeVert after.</td>
  </tr>
  <tr>
    <td><strong>LabelPos</strong></td>
    <td>M</td>
    <td>ISGN G2N</td>
    <td>A number or one of:<ul>
      <li>Bottom</li>
      <li>Top</li>
      <li>Right</li>
      <li>Left</li>
    </ul>
    </td>
  </tr>
  <tr>
    <td><strong>Limbo</strong></td>
    <td>B</td>
    <td>S</td>
    <td>Hummmmmm</td>
  </tr>
  <tr>
    <td><strong>PicsDrawer</strong></td>
    <td>S</td>
    <td>I</td>
    <td>Path to the drawer where images are</td>
  </tr>
  <tr>
    <td><strong>Raised</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>If set to 1, you get mouse-raised buttons</td>
  </tr>
  <tr>
    <td><strong>Remove</strong></td>
    <td>M</td>
    <td>ISGN G2N</td>
    <td>Remove spacers, a number or a combination of<ul>
      <li>Bars</li>
      <li>Buttons</li>
      <li>Images</li>
      <li>All</li>
    </ul></td>
  </tr>
  <tr>
    <td><strong>Scaled</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>If 1, you get scaled images</td>
  </tr>
  <tr>
    <td><strong>SelStrip</strong></td>
    <td>S</td>
    <td>I</td>
    <td>Selected images strip</td>
  </tr>
  <tr>
    <td><strong>SpacerIndex</strong></td>
    <td>N</td>
    <td>I</td>
    <td>The index of the image spacer pic</td>
  </tr>
  <tr>
    <td><strong>Strip</strong></td>
    <td>S</td>
    <td>I</td>
    <td>The name of a picture to load via datatype; it must contains all the buttons pics, in
        a horiz image with a single pixel column between each pics;
        the number of the pics is derived from the buttons number or from the StripButtons
        attribute</td>
  </tr>
  <tr>
    <td><strong>StripCols</strong></td>
    <td>N</td>
    <td>I</td>
    <td>The number of the columns in the strip</td>
  </tr>
  <tr>
    <td><strong>StripHorizSpace</strong></td>
    <td>N</td>
    <td>I</td>
    <td>The pixels beetween two colums in the strip; default 1</td>
  </tr>
  <tr>
    <td><strong>StripRows</strong></td>
    <td>N</td>
    <td>I</td>
    <td>The number of the rows in the strip; default 1</td>
  </tr>
  <tr>
    <td><strong>StripVertSpace</strong></td>
    <td>N</td>
    <td>I</td>
    <td>The pixels beetween two rows in the strip; default 1</td>
  </tr>
  <tr>
    <td><strong>Sunny</strong></td>
    <td>B</td>
    <td>ISGN</td>
    <td>If set to 1, you get mouse-sunny images</td>
  </tr>
  <tr>
    <td><strong>TextOnly</strong></td>
    <td>B</td>
    <td>G</td>
    <td>If, for any reason, the image of a button can't be read, this attribute is set to 1
    and TheBar falls back to Text ViewMode</td>
  </tr>
  <tr>
    <td><strong>ViewMode</strong></td>
    <td>M</td>
    <td>ISG G2N</td>
    <td>A number or one of:<ul>
      <li>TextGFX</li>
      <li>GFX</li>
      <li>Text</li>
    </ul>
    </td>
  </tr>
</table>

<p>&nbsp;</p>

<table border="1" width="100%" cellpadding="4">
  <tr>
    <th colspan="4"><u><strong>Buttons attributes</strong></u></th>
  </tr>
  <tr>
    <th><em><strong>Name</strong></em></th>
    <th><em>Type</em></th>
    <th><em>Class</em></th>
    <th><em>Note</em></th>
  </tr>
  <tr>
    <td><strong>Exclude</strong></td>
    <td>N</td>
    <td>I</td>
    <td>Mutual exclude mask. Note that more than one set of mutual exclude buttons may be
    specified in a single TheBar.</td>
  </tr>
  <tr>
    <td><strong>ID</strong></td>
    <td>N</td>
    <td>I</td>
    <td>The ID of the button</td>
  </tr>
  <tr>
    <td><strong>Img</strong></td>
    <td>M</td>
    <td>I</td>
    <td>Which pic this button uses or one of the special values:
    <ul>
     <li>Bar - add a bar spacer</li>
     <li>Button - add a space with the same size of the buttons</li>
     <li>Image - add an images spacer; the picture specified in SpacerIndex attribute is used
         to create a spacer; if SpacerIndex is not defined a bar spacer is created</li>
     </ul></td>
  </tr>
  <tr>
    <td><strong>Text</strong></td>
    <td>S</td>
    <td>I</td>
    <td>The label for this button</td>
  </tr>
  <tr>
    <td><strong>Help</strong></td>
    <td>S</td>
    <td>I</td>
    <td>Help string for this button</td>
  </tr>
  <tr>
    <td><strong>Flags</strong></td>
    <td>S</td>
    <td>I</td>
    <td>A combination of:<ul>
      <li>Disabled - the button is disabled</li>
      <li>Hide - the button is hidden</li>
      <li>Immediate - Immediate InputMode</li>
      <li>NoClick - None InputMode</li>
      <li>Selected - the button is selected</li>
      <li>Sleep - the gfx stuff of the button are not created and the button is hidden</li>
      <li>Toggle - Toggle InputMode </li>
    </ul>
    Note that default InputMode is RelVerify; see SetAttr method about Hide and Sleep
    </td>
  </tr>
</table>

<p>&nbsp;</p>

<table border="1" cellpadding="4" width="100%">
  <tr>
    <th colspan="3"><u><strong>Methods</strong></u></th>
  </tr>
  <tr>
    <th><em><strong>Name</strong></em></th>
    <th><em><strong>Parameters</strong></em></th>
    <th><em><strong>Note</strong></em></th>
  </tr>
  <tr>
    <td><strong>TheBarAdd</strong></td>
    <td>&lt;button/V&gt;</td>
    <td>Add a button, defined in <em>button</em>, to the bar.</td>
  </tr>
  <tr>
    <td><strong>TheBarGet</strong></td>
    <td>&lt;ID/N&gt;&lt;attr&gt;&lt;var/SN&gt;</td>
    <td>Read the attribute of the button with ID <em>ID</em> and store its value in <em>var</em><br>
    <em>attrs</em> is one of:<ul>
    <li>Hide</li>
    <li>Sleep</li>
    <li>Selected</li>
    <li>Disabled</li>
    <li>Timer</li>
    </td>
  </tr>
  <tr>
    <td><strong>TheBarSet</strong></td>
    <td>&lt;ID/N&gt;&lt;attr&gt;&lt;value&gt;</td>
    <td>Set the attribute of the button with ID <em>ID</em> to <em>value</em><br>
    <em>attrs</em> is one of:<ul>
    <li>Hide</li>
    <li>Sleep</li>
    <li>Selected</li>
    <li>Disabled</li>
    <li>Timer</li>
    </td>
  </tr>
</table>

<p>&nbsp;</p>

<p><b>Example</b></p>

<pre>    mgroup.0="tb"
     tb.class="TheBar"
     tb.Horiz=1
     tb.PicsDrawer="Pics"

      /* Define the pics */
      tb.Pics.0="back"
      tb.Pics.1="forward"
      tb.Pics.2="reload"
      tb.Pics.3="stop"
      tb.Pics.4="home"
      tb.Pics.5="find"

      /* Define the buttons */

      /* ID:0 - Image:"back" */
      tb.0.ID=0
      tb.0.Img=0
      tb.0.Text="Back"

      /* ID:1 - Image:"forward" */
      tb.1.ID=1
      tb.1.Img=1
      tb.1.Text="Forward"
      tb.1.Flags="Immediate selected"

      tb.2.ID=2
      tb.2.Img=2
      tb.2.Text="Reload"
      tb.2.Flags="Immediate"

      tb.3.ID=3
      tb.3.Img=3
      tb.3.Text="Stop"
      tb.3.Flags="Toggle"

      /* A bar spacer */
      tb.4.Img="Bar"

      tb.5.ID=5
      tb.5.Img=4
      tb.5.Text="Home"
      tb.5.Flags="Immediate Selected"
      tb.5.Exclude=2**6

      tb.6.ID=6
      tb.6.Img=5
      tb.6.Text="Find"
      tb.6.Flags="Immediate"
      tb.6.Exclude=2**5

      tb.7.Img="Bar"
      tb.8.ID=8
      tb.8.Img=4
      tb.8.Text="Home"
      tb.8.Flags="Immediate Selected"
      tb.8.Exclude=2**9

      tb.9.ID=9
      tb.9.Img=5
      tb.9.Text="Find"
      tb.9.Flags="Immediate"
      tb.9.Exclude=2**8<pre></pre></body>
</html>